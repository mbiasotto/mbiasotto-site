function submitContactForm(){console.log("submitContactForm executada");const e=document.getElementById("contactForm"),o=document.getElementById("contactFormBtn");return e?o?processFormSubmission(e,o):(console.error("Botão contactFormBtn não encontrado"),!1):(console.error("Formulário contactForm não encontrado"),!1)}function submitQuickForm(e){console.log("submitQuickForm executada com ID:",e);const o=document.getElementById(e),t=document.getElementById(e+"Btn");return o?t?processFormSubmission(o,t):(console.error("Botão não encontrado:",e+"Btn"),!1):(console.error("Formulário não encontrado:",e),!1)}function processFormSubmission(e,o){if(window.formSubmissionActive)return console.log("Envio já em andamento"),!1;if(!validateForm(e))return console.log("Validação falhou"),!1;window.formSubmissionActive=!0,setButtonLoading(o,!0);try{"undefined"!=typeof gtag&&gtag("event","form_submit",{event_category:"Form",event_label:e.id});const o="contactForm"===e.id?"contact_form":"quick_contact";"function"==typeof executeRecaptcha?(console.log("Executando reCAPTCHA para ação:",o),executeRecaptcha(o,(function(t){t&&"error_loading_recaptcha"!==t&&"error_generating_token"!==t?(addRecaptchaToForm(e,t,o),setTimeout((()=>{console.log("Enviando formulário com reCAPTCHA:",e.id),e.submit()}),200)):(console.warn("Erro no reCAPTCHA, enviando sem proteção"),addRecaptchaBypass(e),setTimeout((()=>{console.log("Enviando formulário com bypass:",e.id),e.submit()}),200))}))):(console.warn("reCAPTCHA não disponível, enviando com bypass"),addRecaptchaBypass(e),setTimeout((()=>{console.log("Enviando formulário sem reCAPTCHA:",e.id),e.submit()}),500))}catch(e){return console.error("Erro no envio:",e),window.formSubmissionActive=!1,setButtonLoading(o,!1),showMessage("Erro ao enviar formulário. Tente novamente.","error"),!1}return!0}function validateForm(e){if("function"==typeof validateCompleteForm)return validateCompleteForm(e);const o=e.querySelectorAll("[required]");let t=!0;return o.forEach((e=>{e.classList.remove("is-invalid"),e.value.trim()||(e.classList.add("is-invalid"),t=!1)})),t||showMessage("Por favor, preencha todos os campos obrigatórios.","warning"),t}function setButtonLoading(e,o){const t=e.querySelector(".btn-text"),n=e.querySelector(".spinner-border");if(o)e.disabled=!0,e.classList.add("btn-loading"),t&&(t.setAttribute("data-original-text",t.textContent),t.textContent="Enviando..."),n&&n.classList.remove("d-none"),e.style.opacity="0.8",e.style.cursor="not-allowed";else{if(e.disabled=!1,e.classList.remove("btn-loading"),t){const o=t.getAttribute("data-original-text");o?t.textContent=o:e.id.includes("contactForm")?t.textContent="Enviar Mensagem":t.textContent="Solicitar Orçamento"}n&&n.classList.add("d-none"),e.style.opacity="1",e.style.cursor="pointer"}}function addRecaptchaToForm(e,o,t){let n=e.querySelector('input[name="recaptcha_token"]');n||(n=document.createElement("input"),n.type="hidden",n.name="recaptcha_token",e.appendChild(n)),n.value=o;let r=e.querySelector('input[name="recaptcha_action"]');r||(r=document.createElement("input"),r.type="hidden",r.name="recaptcha_action",e.appendChild(r)),r.value=t,console.log("reCAPTCHA adicionado ao formulário:",t)}function addRecaptchaBypass(e){let o=e.querySelector('input[name="recaptcha_bypass"]');o||(o=document.createElement("input"),o.type="hidden",o.name="recaptcha_bypass",e.appendChild(o)),o.value="1",console.log("reCAPTCHA bypass adicionado ao formulário")}function showMessage(e,o="info"){document.querySelectorAll(".form-message").forEach((e=>e.remove()));const t="error"===o?"danger":o,n=document.createElement("div");n.className=`alert alert-${t} form-message`,n.textContent=e,n.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        z-index: 9999;\n        min-width: 300px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n    ",document.body.appendChild(n),setTimeout((()=>{n.parentNode&&n.remove()}),5e3)}function resetFormState(){window.formSubmissionActive=!1;document.querySelectorAll(".btn-form-submit").forEach((e=>{setButtonLoading(e,!1)})),console.log("Estado do formulário resetado")}window.formSubmissionActive=!1,document.addEventListener("DOMContentLoaded",(function(){console.log("Sistema de envio simplificado carregado"),setInterval((()=>{window.formSubmissionActive&&(console.log("Reset automático de segurança"),resetFormState())}),3e4);document.querySelectorAll('form[method="POST"]').forEach((e=>{e.addEventListener("submit",(function(e){if(window.formSubmissionActive)return e.preventDefault(),console.log("Duplo envio prevenido"),!1}))}))})),window.resetFormState=resetFormState;